<!DOCTYPE html>
<html lang="en"><head>
    <title>CONGX.DEV</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="format-detection" content="telephone=no" />
    <meta name="theme-color" content="#000084" />
    <link rel="icon" href="https://congx.dev//favicon.ico">
    <link rel="canonical" href="https://congx.dev/">
    
    <link rel="stylesheet" href="/css/bootstrap.css">
    <link rel="stylesheet" href="/css/bootstrap-responsive.css">
    <link rel="stylesheet" href="/css/style.css">
    
</head><body>
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">
            <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse"></button>
            <a class="brand" href="https://congx.dev/">CONGX.DEV</a>
            <div class="nav-collapse collapse">
                <ul class="nav">
                    
                    
                        
                            <li>
                                <a href="/readme">
                                    
                                    <span>README</span>
                                </a>
                            </li>
                        
                    
                        
                            <li>
                                <a href="/posts/">
                                    
                                    <span>All posts</span>
                                </a>
                            </li>
                        
                    
                </ul>
            </div>
        </div>
    </div>
</nav><div id="content" class="container">

<div class="row-fluid navmargin">
    <div class="page-header">
        <h1>XPSL Docs: Functional requirements - Fri, Dec 13, 2019</h1>
    </div>
    <p class="lead">There are 4 types in XPSL: user, room, track, playlist. This blog post lists the functional requirements for each of these types.</p>
    

<p>There are 4 types in XPSL: user, room, track, playlist. This blog post lists the functional requirements for each of these types.</p>

<h2 id="xpsl-user">XPSL User</h2>

<ul>
<li>A user must have access to either Spotify or Apple Music</li>
<li>A user must authorise XPSL for their Spotify and/or Apple Music account</li>
<li>User can only belong to 1 room</li>
<li>User can create a room or join a room once they have authorised XPSL to access Spotify and/or Apple Music</li>
<li>XPSL will refresh Spotify access token on the user’s behalf</li>
<li>Each XPSL user has a unique ID</li>
<li>A user must have a display name</li>
<li>A user could have a short name</li>
<li>XPSL user client is a NATS client that subscribe to a XPSL Room (NATS Topic)</li>
</ul>

<h2 id="xpsl-room">XPSL Room</h2>

<ul>
<li>Each room has a group of users who manage a shared playlist</li>
<li>Room is a NATS topic that multiple users can subscribe to</li>
<li>Each room has a topic ID of xpsl-room-<a unique UUID with no dashes></li>
<li>Each room can have 1 or more users. If there are no users in the room, the room is deleted.</li>
<li>A user can only have 1 room</li>
<li>Each room can only have 1 playlist</li>
<li>Each room broadcast to subscribers events emitted from playlist controls (play, pause, next, previous, add, remove) and events from users interacting with the room (leave, join)</li>
<li>Rooms track currently playing track</li>
<li>Users can input share link from Spotify and Apple Music</li>
<li>Users can search for songs. Only shared results from Spotify and Apple Music are shown.</li>
</ul>

<h2 id="xpsl-track">XPSL Track</h2>

<ul>
<li>Track has a unique ISRC</li>
<li>Track has a name, album, artists, a single ISRC, Spotify and/or Apple Music links</li>
<li>Track can belong to multiple playlists</li>
</ul>

<h2 id="xpsl-playlist">XPSL Playlist</h2>

<ul>
<li>A playlist can belong to only 1 room</li>
<li>A playlist can contain multiple tracks</li>
<li>Playlists emit track <em>add</em> and <em>remove</em> events</li>
<li>Playlists emit <em>play, pause, next, previous</em> events, each of this event must contain the track ISRC, Spotify link and/or Apple Music link</li>
</ul>

<h2 id="getting-track-information-from-spotify-apple-music">Getting track information from Spotify / Apple Music</h2>

<ul>
<li>XPSL stores Spotify access token from the user</li>
<li>XPSL stores Apple Music access token from the developer</li>
<li>When looking up a song in Spotify, a random access token from a user is used</li>
<li>When looking up a song in Apple Music, the developer’s access token is used</li>
<li>If a user inputs a Spotify share link, the track’s metadata are retrieved using that user’s access token - unless track metadata is already present</li>
<li>If a user inputs an Apple Music share link, the track’s metadata are retrieved using the developer’s access token</li>
</ul>

<p><strong>Note</strong>: <a href="http://NATS.io">NATS.io</a> is not a hard requirement</p>

    <h4><a href="https://congx.dev/">Back to Home</a></h4>
</div>


        </div><footer class="container">
    <hr class="soften">
    <p>
        &copy; 
        <a href="congx.dev" target="_blank">
            Cong Nguyen
        </a>
        <span id="thisyear">2020</span>
        
             | Built on <a href="//gohugo.io" target="_blank">Hugo</a>
        
    </p>
    <p class="text-center">
        
        <a href="https://twitter.com/congxdev">Twitter</a> 
        <a href="https://linkedin.com/in/cong-ng">Linkedin</a> 
        <a href="https://github.com/rampadc">GitHub</a> 
        
    </p>
</footer>

<script src="/js/jquery.js"></script>
<script src="/js/bootstrap-386.js"></script>
<script src="/js/bootstrap-transition.js"></script>
<script src="/js/bootstrap-alert.js"></script>
<script src="/js/bootstrap-modal.js"></script>
<script src="/js/bootstrap-dropdown.js"></script>
<script src="/js/bootstrap-scrollspy.js"></script>
<script src="/js/bootstrap-tab.js"></script>
<script src="/js/bootstrap-tooltip.js"></script>
<script src="/js/bootstrap-popover.js"></script>
<script src="/js/bootstrap-button.js"></script>
<script src="/js/bootstrap-collapse.js"></script>
<script src="/js/bootstrap-carousel.js"></script>
<script src="/js/bootstrap-typeahead.js"></script>
<script src="/js/bootstrap-affix.js"></script>
<script>
    _386 = { 
        fastLoad: false ,
        onePass: false , 
        speedFactor: 1.25 
    };

    
    function ThisYear() {
        document.getElementById('thisyear').innerHTML = new Date().getFullYear();
    };
</script></body>
</html>
