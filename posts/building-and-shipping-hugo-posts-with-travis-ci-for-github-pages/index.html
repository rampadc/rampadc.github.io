<!DOCTYPE html>
<html><head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Building and shipping Hugo posts with Travis CI for Github Pages - Cong&#39;s little blog</title><meta name="viewport" content="width=device-width, initial-scale=1">
	<meta property="og:title" content="Building and shipping Hugo posts with Travis CI for Github Pages" />
<meta property="og:description" content="Some notes on how I set up Travis-CI to build and ship content to another Github Pages repository" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://congx.dev/posts/building-and-shipping-hugo-posts-with-travis-ci-for-github-pages/" />
<meta property="article:published_time" content="2019-12-10T14:40:00+00:00" />
<meta property="article:modified_time" content="2019-12-10T14:40:00+00:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Building and shipping Hugo posts with Travis CI for Github Pages"/>
<meta name="twitter:description" content="Some notes on how I set up Travis-CI to build and ship content to another Github Pages repository"/>
<script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
	<link href="https://fonts.googleapis.com/css2?family=Fira+Sans&display=swap" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Roboto+Mono" rel="stylesheet">
	<link rel="stylesheet" type="text/css" media="screen" href="https://congx.dev/css/main.css" />
</head><body>
        <div class="content"><header>
	<div class="main">
		<a href="https://congx.dev/">Cong&#39;s little blog</a>
	</div>
	<nav>
		
		<a href="/readme">README</a>
		
		<a href="/posts/">All posts</a>
		
	</nav>
</header>

<main>
	<article>
		<div class="title">
			<h1 class="title">Building and shipping Hugo posts with Travis CI for Github Pages</h1>
			<div class="meta">Posted on Dec 10, 2019</div>
		</div>
		

		<section class="body">
			

<p>Since my blog source code is private, this blog post contains snippets of how I set up Travis CI to build and push Hugo&rsquo;s <code>public</code> folder to another <a href="https://github.com/rampadc/rampadc.github.io">repository</a> that hosts my public Github Pages.</p>

<p>It&rsquo;s a simple solution, yet the top Google results only feature custom scripts ü§∑ü§∑‚Äç‚ôÄÔ∏èü§∑‚Äç‚ôÇÔ∏è.</p>

<h1 id="configuring-travis-ci">Configuring Travis CI</h1>

<p><code>.travis.yml</code></p>

<pre><code class="language-yaml">---
install:
  - curl -LO https://github.com/gohugoio/hugo/releases/download/v0.59.1/hugo_0.59.1_Linux-64bit.deb
  - sudo dpkg -i hugo_0.59.1_Linux-64bit.deb

script:
  - git submodule init
  - git submodule update
  - hugo
  - rm -Rf .git
  - git clone $REMOTE_REPO remote_repo
  - cp -TR public remote_repo
  - cd remote_repo
  - git add .
  - git commit -m &quot;üöÄ CI Updating blog üéÅ&quot;
  - git push
</code></pre>

<ul>
<li>Line 10 removes the existing <code>.git</code> folder  in order to clone another git folder inside it and push that one instead</li>
<li>Line 12 clones an existing git repository into a folder called <code>remote_repo</code></li>
<li>Line 13 copies all the content from <code>public</code> into <code>remote_repo</code></li>
</ul>

<p>On line 12, the REMOTE_REPO is configured as a secure Travis environment variable. It contains the a link to a remote repository in the format of</p>

<p><code>https://GITHUB_PERSONAL_TOKEN@github.com/&lt;user&gt;/&lt;repo&gt;</code></p>

<p>The personal Github token is configured to have access to <code>public_repo</code>. Update line 3 as needed if you&rsquo;re using a newer Hugo release.</p>

		</section>

		<div class="post-tags">
			
			
			<nav class="nav tags">
				<ul class="tags">
					
					<li><a href="/tags/hugo">hugo</a></li>
					
				</ul>
			</nav>
			
			
		</div>
	</article>
</main>
<footer>
<hr><a class="soc" href="https://twitter.com/congxdev" title="GitHub"><i data-feather="github"></i></a>|<a class="soc" href="https://twitter.com/congxdev" title="Twitter"><i data-feather="twitter"></i></a>|<a class="soc" href="https://linkedin.com/in/cong-ng" title="LinkedIn"><i data-feather="linkedin"></i></a>|‚ö°Ô∏è
	2020  <a href="https://github.com/athul/archie">Archie Theme</a> | Built with <a href="https://gohugo.io">Hugo</a>
</footer>


<script>
      feather.replace()
</script>

</div>
    </body>
</html>
